<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Place â€” The Collective Canvas</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  background: #0b0b0b;
  overflow: hidden;
  cursor: crosshair;
}

#ui {
  position: fixed;
  top: 20px;
  left: 20px;
  color: white;
  font-family: Inter, sans-serif;
  z-index: 10;
  font-size: 14px;
  opacity: 0.8;
}

canvas {
  display: block;
}
</style>
</head>

<body>

<div id="ui">
  Pixels remaining: <span id="remaining">10</span>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const SIZE = 1000;
let pixelsRemaining = 10;
let scale = 8; // zoom factor
let mouse = { x: 0, y: 0 };

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const offscreen = document.createElement("canvas");
offscreen.width = SIZE;
offscreen.height = SIZE;
const offctx = offscreen.getContext("2d");

// background
offctx.fillStyle = "#0b0b0b";
offctx.fillRect(0, 0, SIZE, SIZE);

// mouse tracking
canvas.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
  draw();
});

// click to place pixel
canvas.addEventListener("click", () => {
  if (pixelsRemaining <= 0) return;

  const px = Math.floor(mouse.x / scale);
  const py = Math.floor(mouse.y / scale);

  offctx.fillStyle = "#ffffff";
  offctx.fillRect(px, py, 1, 1);

  pixelsRemaining--;
  document.getElementById("remaining").textContent = pixelsRemaining;
  draw();
});

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // draw zoomed canvas
  ctx.imageSmoothingEnabled = false;
  ctx.drawImage(
    offscreen,
    0, 0, SIZE, SIZE,
    0, 0, SIZE * scale, SIZE * scale
  );

  // loupe
  ctx.beginPath();
  ctx.arc(mouse.x, mouse.y, 60, 0, Math.PI * 2);
  ctx.strokeStyle = "rgba(255,255,255,0.8)";
  ctx.lineWidth = 2;
  ctx.stroke();
}
draw();
</script>

</body>
</html>
